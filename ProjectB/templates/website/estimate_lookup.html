<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Estimate Lookup â€” Pioneer Global Logistics</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        /* --- Global Variables and Base Styles (from uniform header) --- */
        :root{
            --brand:#0033cc;
            --brand-dark:#002699;
            --accent:#ffcc00;
            --muted:#f2f7ff;
            --card-bg:#fbfdff;
            --text:#222;
            --rounded:12px;
        }

        body {
            background: #f4f7fc;
            font-family: Arial, Helvetica, sans-serif;
            margin: 0; /* Ensure no default body margin interferes with sticky header */
        }
        
        /* --- UNIFORM RESPONSIVE STICKY HEADER --- */
        header {
            background: var(--brand);
            padding: 0 20px;
            height: 70px;
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header-container {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header img { height: 44px; display: block; }

        /* Desktop Navigation */
        .nav-links { display: flex; gap: 24px; align-items: center; }
        .nav-links a { 
            color: white; 
            text-decoration: none; 
            font-weight: 600; 
            font-size: 15px;
            transition: color 0.2s;
        }
        .nav-links a:hover { color: var(--accent); }
        .nav-links a.active { color: var(--accent); }

        /* Mobile Menu Toggle (Corrected for centering and size) */
        .menu-toggle { 
            display: none; 
            background: none; 
            border: none; 
            color: white; 
            font-size: 32px; 
            cursor: pointer; 
            padding: 0; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            header { padding: 0 16px; }
            
            .menu-toggle { 
                display: flex; 
                width: 32px; 
                height: 32px; 
            }

            .nav-links {
                display: none; /* Hidden by default */
                position: absolute;
                top: 70px; /* Height of header */
                left: 0;
                right: 0;
                background: var(--brand-dark);
                flex-direction: column;
                padding: 0;
                gap: 0;
                border-top: 1px solid rgba(255,255,255,0.1);
                box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            }

            .nav-links.active { display: flex; animation: slideDown 0.3s ease; }

            .nav-links a {
                display: block;
                padding: 16px 20px;
                border-bottom: 1px solid rgba(255,255,255,0.05);
                width: 100%;
                box-sizing: border-box;
            }
            .nav-links a:last-child { border-bottom: none; }
        }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        /* --- End of Uniform Header Styles --- */


        /* --- Estimates Lookup Specific Styles --- */
        .page-title {
            text-align: center;
            font-size: 26px;
            font-weight: 700;
            color: #0033cc;
            margin-top: 30px;
            margin-bottom: 10px;
        }

        .search-card {
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 550px;
            margin: 20px auto;
        }

        .results-card {
            background: #fff;
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .summary-box {
            background: #f7fbff;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #eaeaea;
        }

        .summary-title {
            font-size: 14px;
            font-weight: 600;
            color: #003366;
            margin-bottom: 3px;
        }

        .summary-value {
            font-size: 16px;
            font-weight: 700;
            color: #222;
        }

        .no-result {
            background: #fff6f6;
            border-left: 4px solid #ff4d4d;
            padding: 14px;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<header>
    <div class="header-container">
        <a href="/">
            <img src="/static/logo.png" alt="Pioneer Global Logistics">
        </a>

        <button class="menu-toggle" onclick="toggleMenu()" aria-label="Toggle navigation">
            <i class="bi bi-list"></i>
        </button>

        <nav class="nav-links" id="navLinks">
            <a href="/">Home</a>
            <a href="/about/">About</a>
            <a href="/services/">Services</a>
            <a href="/calculator">Calculator</a>
            <a href="/tracking/">Tracking</a>
            <a href="/contact/">Contact</a>
            <a href="/estimates/" class="active">Estimates</a>
        </nav>
    </div>
</header>
<div class="container">

    <h2 class="page-title">Check Your Shipment Estimates</h2>

    <div class="search-card">
        <form method="POST">
            {% csrf_token %}

            <label class="form-label"><strong>Enter Phone Number</strong></label>
            <input type="text" name="phone" class="form-control" placeholder="e.g. 09012345678" required>

            <button type="submit" class="btn btn-primary mt-3 w-100">Search</button>
        </form>
    </div>

    {% if results %}
        <div class="results-card">
            <h4 class="mb-3" style="color:#0033cc;">Your Estimate Records</h4>

            {% for item in results %}
                <div class="summary-box">
                    <div class="summary-title">Weight (kg)</div>
                    <div class="summary-value">{{ item.weight_kg }}</div>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Distance (km)</div>
                    <div class="summary-value">{{ item.distance_km }}</div>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Delivery Type</div>
                    <div class="summary-value">{{ item.delivery_type }}</div>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Price ({{ item.currency }})</div>
                    <div class="summary-value">{{ item.price }}</div>
                </div>

                {% if item.note %}
                <div class="summary-box">
                    <div class="summary-title">Notes</div>
                    <div class="summary-value">{{ item.note }}</div>
                </div>
                {% endif %}

                <div class="summary-box">
                    <div class="summary-title">Date Created</div>
                    <div class="summary-value">{{ item.created_at|date:"M d, Y" }}</div>
                </div>

                {% if not forloop.last %}
                    <hr>
                {% endif %}
            {% endfor %}
        </div>

    {% elif results == False %}
        <div class="no-result">
            <strong>No records found.</strong>  
            No estimates match the phone number you entered.
        </div>
    {% endif %}

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Header Toggle Menu
  function toggleMenu() {
      const nav = document.getElementById('navLinks');
      const btn = document.querySelector('.menu-toggle i');
      
      nav.classList.toggle('active');
      
      if (nav.classList.contains('active')) {
          btn.classList.remove('bi-list');
          btn.classList.add('bi-x-lg');
      } else {
          btn.classList.remove('bi-x-lg');
          btn.classList.add('bi-list');
      }
  }
</script>

</body>
</html>

